# Technical Specifications - HomeHive 21M Token MVP

## Exact Tech Stack (No Alternatives - Token Budget Constraints)

- **Framework:** React 18 with Vite (fast setup, minimal tokens)
- **Styling:** TailwindCSS only (no custom CSS frameworks)
- **State:** useState/useContext only (no Redux/Zustand)
- **Routing:** React Router v6 (basic routing only)
- **Forms:** Native HTML forms with basic validation (no React Hook Form)
- **Database:** Supabase (PostgreSQL) - minimal single table setup
- **Deployment:** Netlify (static site with Supabase backend)

## Authentication Strategy (MOCK ONLY - 0.5M Tokens)

### **Hardcoded Demo User Approach**
```javascript
// No login flow, no signup, no logout
// App loads directly with demo user active

const DEMO_USER = {
  id: 'demo-user-123',
  name: 'Demo User',
  email: 'demo@homehive.app' // display only
};

// AuthContext.jsx - Ultra Simple
const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const [user] = useState(DEMO_USER); // Always logged in
  
  return (
    <AuthContext.Provider value={{ user }}>
      {children}
    </AuthContext.Provider>
  );
};

// No login component needed
// No protected routes needed
// No session management needed
```

## Database Strategy (MINIMAL SUPABASE - 2M Tokens)

### **Single Table Architecture**
```sql
-- EXACT Supabase Schema (Copy-Paste Ready)
CREATE TABLE items (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id TEXT NOT NULL DEFAULT 'demo-user-123',
  name TEXT NOT NULL,
  description TEXT,
  category TEXT NOT NULL,
  container TEXT NOT NULL,
  room TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT now()
);

-- Row Level Security
ALTER TABLE items ENABLE ROW LEVEL SECURITY;

-- Single Policy (Demo User Only)
CREATE POLICY "Demo user access" ON items
  FOR ALL USING (user_id = 'demo-user-123');

-- Create Index for Search Performance
CREATE INDEX idx_items_search ON items USING gin(
  to_tsvector('english', name || ' ' || description || ' ' || container || ' ' || room)
);
```

### **Supabase Environment Variables**
```bash
# .env (Netlify Environment Variables)
VITE_SUPABASE_URL=your-project-url
VITE_SUPABASE_ANON_KEY=your-anon-key
# No auth tokens needed for demo user
```

## Data Models (Exact Structure)

### **Item Model (Complete Definition)**
```javascript
const ItemModel = {
  id: 'uuid',                    // Auto-generated by Supabase
  user_id: 'demo-user-123',      // Always this value for MVP
  name: 'string',                // Required, max 100 chars
  description: 'string|null',    // Optional, max 500 chars
  category: 'string',            // Required, must be from CATEGORIES array
  container: 'string',           // Required, e.g., "Garage Box #3"
  room: 'string',                // Required, e.g., "Garage"
  created_at: 'timestamp'        // Auto-generated
};

// Predefined Categories (Hardcoded)
const CATEGORIES = [
  "Electronics", 
  "Camping Gear", 
  "Kitchen Items", 
  "Tools", 
  "Seasonal Items", 
  "Documents", 
  "Cleaning Supplies", 
  "Sports Equipment", 
  "Other"
];

// Room Suggestions (Optional Auto-complete)
const COMMON_ROOMS = [
  "Garage", "Basement", "Attic", "Bedroom", "Kitchen", 
  "Living Room", "Office", "Closet", "Shed", "Storage Unit"
];
```

## API Layer (Supabase Client - 2.5M Tokens)

### **Supabase Client Setup**
```javascript
// lib/supabase.js
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;

export const supabase = createClient(supabaseUrl, supabaseAnonKey);
```

### **Items Hook (Complete CRUD)**
```javascript
// hooks/useItems.js
import { useState, useEffect } from 'react';
import { supabase } from '../lib/supabase';

export const useItems = () => {
  const [items, setItems] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  // Fetch all items for demo user
  const fetchItems = async () => {
    setLoading(true);
    try {
      const { data, error } = await supabase
        .from('items')
        .select('*')
        .eq('user_id', 'demo-user-123')
        .order('created_at', { ascending: false });
      
      if (error) throw error;
      setItems(data || []);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  // Add new item
  const addItem = async (itemData) => {
    try {
      const { data, error } = await supabase
        .from('items')
        .insert([{ ...itemData, user_id: 'demo-user-123' }])
        .select()
        .single();
      
      if (error) throw error;
      setItems(prev => [data, ...prev]);
      return { success: true, data };
    } catch (err) {
      setError(err.message);
      return { success: false, error: err.message };
    }
  };

  // Delete item
  const deleteItem = async (itemId) => {
    try {
      const { error } = await supabase
        .from('items')
        .delete()
        .eq('id', itemId)
        .eq('user_id', 'demo-user-123');
      
      if (error) throw error;
      setItems(prev => prev.filter(item => item.id !== itemId));
      return { success: true };
    } catch (err) {
      setError(err.message);
      return { success: false, error: err.message };
    }
  };

  // Search items
  const searchItems = async (query) => {
    if (!query.trim()) {
      await fetchItems();
      return;
    }

    setLoading(true);
    try {
      const { data, error } = await supabase
        .from('items')
        .select('*')
        .eq('user_id', 'demo-user-123')
        .or(`name.ilike.%${query}%,description.ilike.%${query}%,container.ilike.%${query}%,room.ilike.%${query}%`)
        .order('created_at', { ascending: false });
      
      if (error) throw error;
      setItems(data || []);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  // Filter by category
  const filterByCategory = async (category) => {
    setLoading(true);
    try {
      const { data, error } = await supabase
        .from('items')
        .select('*')
        .eq('user_id', 'demo-user-123')
        .eq('category', category)
        .order('created_at', { ascending: false });
      
      if (error) throw error;
      setItems(data || []);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchItems();
  }, []);

  return {
    items,
    loading,
    error,
    addItem,
    deleteItem,
    searchItems,
    filterByCategory,
    refetch: fetchItems
  };
};
```

## Component Architecture (File Organization)

### **Project Structure (Keep Simple)**
```
src/
├── components/
│   ├── ItemForm.jsx          // Add item form
│   ├── ItemCard.jsx          // Display single item
│   ├── ItemList.jsx          // List of items
│   ├── SearchBar.jsx         // Search input
│   └── Layout.jsx            // Header + main layout
├── hooks/
│   └── useItems.js           // All item operations
├── lib/
│   └── supabase.js           // Supabase client
├── context/
│   └── AuthContext.jsx       // Demo user context
├── App.jsx                   // Main app
└── main.jsx                  // Entry point
```

### **Component Naming Convention**
- **Components:** PascalCase (ItemForm, SearchBar, ItemCard)
- **Files:** Same as component name (ItemForm.jsx)
- **CSS Classes:** kebab-case with honey prefix (honey-card, honey-button)
- **Functions:** camelCase (addItem, searchItems)

## Honey Theme Implementation (1.5M Tokens)

### **TailwindCSS Configuration**
```javascript
// tailwind.config.js
module.exports = {
  content: ['./index.html', './src/**/*.{js,jsx}'],
  theme: {
    extend: {
      colors: {
        honey: {
          50: '#FFFBEB',   // Background
          100: '#FEF3C7',  // Cards
          300: '#FCD34D',  // Secondary
          500: '#F59E0B',  // Primary
          800: '#92400E',  // Text/borders
        }
      }
    }
  }
};
```

### **Component Styling Patterns**
```javascript
// Standard styling classes for consistency
const HONEY_STYLES = {
  page: 'bg-honey-50 min-h-screen',
  card: 'bg-honey-100 border border-honey-300 rounded-lg p-4',
  button: 'bg-honey-500 hover:bg-honey-600 text-white px-4 py-2 rounded',
  input: 'border border-honey-300 rounded px-3 py-2 focus:border-honey-500',
  header: 'bg-honey-500 text-white px-6 py-4'
};
```

## Search Implementation (2M Tokens)

### **Search Strategy (Simple but Effective)**
```javascript
// SearchBar.jsx - Basic Implementation
const SearchBar = ({ onSearch, onCategoryFilter }) => {
  const [query, setQuery] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('');

  const handleSearch = (e) => {
    const value = e.target.value;
    setQuery(value);
    onSearch(value); // Real-time search
  };

  const handleCategoryChange = (e) => {
    const category = e.target.value;
    setSelectedCategory(category);
    if (category) {
      onCategoryFilter(category);
    } else {
      onSearch(''); // Show all items
    }
  };

  return (
    <div className="flex gap-4 mb-6">
      <input
        type="text"
        placeholder="Search items, containers, or rooms..."
        value={query}
        onChange={handleSearch}
        className="flex-1 border border-honey-300 rounded px-3 py-2 focus:border-honey-500"
      />
      <select
        value={selectedCategory}
        onChange={handleCategoryChange}
        className="border border-honey-300 rounded px-3 py-2 focus:border-honey-500"
      >
        <option value="">All Categories</option>
        {CATEGORIES.map(cat => (
          <option key={cat} value={cat}>{cat}</option>
        ))}
      </select>
    </div>
  );
};
```

## Deployment Strategy (1M Tokens)

### **Netlify Configuration**
```toml
# netlify.toml
[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "18"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

### **Environment Variables (Netlify Dashboard)**
```
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
```

### **Build Commands**
```bash
# Development
npm run dev

# Production Build
npm run build

# Preview Build
npm run preview
```

## Error Handling & Validation (0.5M Tokens)

### **Basic Form Validation**
```javascript
const validateItem = (item) => {
  const errors = {};
  
  if (!item.name?.trim()) errors.name = 'Name is required';
  if (!item.category) errors.category = 'Category is required';
  if (!item.container?.trim()) errors.container = 'Container is required';
  if (!item.room?.trim()) errors.room = 'Room is required';
  
  return {
    isValid: Object.keys(errors).length === 0,
    errors
  };
};
```

### **Database Error Handling**
```javascript
const handleError = (error) => {
  console.error('Database error:', error);
  
  // User-friendly error messages
  if (error.message.includes('duplicate')) {
    return 'This item already exists';
  }
  if (error.message.includes('network')) {
    return 'Connection error. Please try again.';
  }
  return 'Something went wrong. Please try again.';
};
```

## Performance Considerations

### **Query Optimization**
- Single table reduces complexity
- Indexes on search fields
- Limit results to 100 items max
- No real-time subscriptions (too complex for MVP)

### **Bundle Size**
- Vite for fast builds
- TailwindCSS purging
- No unnecessary dependencies
- Tree-shaking enabled

## Demo Data Setup

### **Pre-populate Database**
```sql
-- Insert sample data for demo
INSERT INTO items (user_id, name, description, category, container, room) VALUES
  ('demo-user-123', 'Camping Tent', '4-person Coleman tent', 'Camping Gear', 'Garage Box #1', 'Garage'),
  ('demo-user-123', 'Laptop Charger', 'MacBook Pro charger', 'Electronics', 'Office Drawer', 'Office'),
  ('demo-user-123', 'Kitchen Scale', 'Digital food scale', 'Kitchen Items', 'Kitchen Cabinet #3', 'Kitchen'),
  ('demo-user-123', 'Drill Set', 'Cordless drill with bits', 'Tools', 'Garage Toolbox', 'Garage'),
  ('demo-user-123', 'Winter Jackets', 'Family winter coats', 'Seasonal Items', 'Hall Closet - Top Shelf', 'Hallway');
```

## Token Budget Reality Check

**This technical specification is designed for the 21M token constraint:**
- **Simple patterns** that AI can implement quickly
- **Copy-paste code blocks** to reduce AI interpretation
- **Single table architecture** to avoid complex relationships
- **Minimal abstractions** to reduce token consumption
- **No over-engineering** - just enough to work

**Success = Working demo that proves the HomeHive concept within budget.**